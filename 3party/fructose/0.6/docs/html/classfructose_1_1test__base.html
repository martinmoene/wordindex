<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>FRUCTOSE: fructose::test_base&lt; test_container &gt; Class Template Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.6 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="annotated.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="namespacefructose.html">fructose</a>::<a class="el" href="classfructose_1_1test__base.html">test_base</a></div>
<h1>fructose::test_base&lt; test_container &gt; Class Template Reference</h1><!-- doxytag: class="fructose::test_base" --><!-- doxytag: inherits="fructose::test_root" --><code>#include &lt;<a class="el" href="test__base_8h-source.html">test_base.h</a>&gt;</code>
<p>
<p>Inheritance diagram for fructose::test_base&lt; test_container &gt;:
<p><center><img src="classfructose_1_1test__base.png" usemap="#fructose::test_base< test_container >_map" border="0" alt=""></center>
<map name="fructose::test_base< test_container >_map">
<area href="classfructose_1_1test__root.html" alt="fructose::test_root" shape="rect" coords="0,0,220,24">
</map>
<a href="classfructose_1_1test__base-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(test_container::*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#696e7bf639f2a82053e8529eab26ab1e">test_case</a> )(const std::string &amp;)</td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#30560442a7c4c8c495e2bd7cff352cdd">add_test</a> (const std::string &amp;name, <a class="el" href="classfructose_1_1test__base.html#696e7bf639f2a82053e8529eab26ab1e">test_case</a> the_test)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#bd2e9bcf3098f22ce4ff6bb44218ddfd">run</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#1e71f643ce9403eaef70befedc068daa">run</a> (int argc, char *argv[])</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#7f62476b5b76f573ad6eab2adcbab476">run</a> (const <a class="el" href="classfructose_1_1test__root.html#bb7a988db4e5ea2c8a8d52173947ed23">suite</a> &amp;<a class="el" href="classfructose_1_1test__root.html#bb7a988db4e5ea2c8a8d52173947ed23">suite</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="classfructose_1_1test__root.html#bb7a988db4e5ea2c8a8d52173947ed23">suite</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classfructose_1_1test__base.html#7b41fc2ae3f64bcc5139cb74830aeffa">get_suite</a> (int argc, char *argv[])</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;typename test_container&gt;<br>
 class fructose::test_base&lt; test_container &gt;</h3>

Base class for test container classes<p>
The test container class, i.e., the one which contains the test cases as members, must derive from <a class="el" href="classfructose_1_1test__base.html">test_base</a>.<p>
Synopsis:<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">     #include "fructose/test_base.h"</span>
 
     [...]
 
     <span class="keyword">class </span>my_test : <span class="keyword">public</span> test_base&lt;my_test&gt;
     {
     <span class="keyword">public</span>:
         my_test(<span class="keywordtype">int</span> val1, <span class="keywordtype">int</span> val2);
         <span class="keywordtype">void</span> test_equality(<span class="keyword">const</span> std::string&amp; test_name);
            <span class="keywordtype">void</span> test_foobar(<span class="keyword">const</span> std::string&amp; test_name);
         [...]
     };
 
     [...]
 
     <span class="keywordtype">void</span> my_test::test_equality(<span class="keyword">const</span> std::string&amp; the_name)
     {
         fructose_assert(my_test(1,2) == my_test(1,2));
     }
 
     [...]
 
     <span class="keywordtype">void</span> my_test::test_foobar(<span class="keyword">const</span> std::string&amp; test_name)
     {
         fructose_assert_exception(my_test(1,4).foobar(), MathException);
     }
 
     <span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])
     {
         my_test tests;
 
         tests.add_test(<span class="stringliteral">"testEquality"</span>, &amp;my_test::test_equality);
         tests.add_test(<span class="stringliteral">"testAddition"</span>, &amp;my_test::test_foobar);
     
         [...]
 
         <span class="keywordflow">return</span> tests.run(argc, argv); 
     }
</pre></div><p>
There should be a test driver for each library module (*.cpp file with associated header), structured like the example above. Test cases are represented as member functions of an ad-hoc class ("test container class") which must derive from the template <a class="el" href="classfructose_1_1test__base.html">test_base</a> with itself as the template argument. (This is the Curiously Recurring Template Pattern CRTP.)<p>
In writing the test code, the test assert macros defined below come in handy.<ul>
<li>fructose_assert(condition)</li><li>fructose_loop1_assert(line, 1stLoopCounter, condition)</li><li>fructose_loop2_assert(line, 1stLoopCounter, 2ndLoopCounter, condition)</li></ul>
<p>
Test drivers accept a set of standard command line arguments which are displayed if the -h option is set:<p>
<div class="fragment"><pre class="fragment">  USAGE:
  
     ./example  [-h] [-a] [-v] [--] &lt;testNameString&gt; ...
  
  
  Where:
  
     -h,  --help
       -h[elp]
  
     -a,  --assert_fatal
       -a[ssert_fatal]
  
     -v,  --<a class="code" href="classfructose_1_1test__root.html#d599f1c6a610e811991b8bd40d9a32bf">verbose</a>
       -v[erbose]
  
     --,  --ignore_rest
       Ignores the rest of the labeled arguments following <span class="keyword">this</span> flag.
  
     &lt;testNameString&gt;  (accepted multiple times)
       test names
  
  Supported test names are:
      test_equality
      test_foobar
</pre></div><p>
Notice the list of configured test cases displayed after the command line options. Test cases can be named explicitly when running the driver, which restricts execution to the named test cases.<p>
<div class="fragment"><pre class="fragment">     $ testdriver -v test_foobar
     running test_foobar
</pre></div><p>
This is useful when trying to focus on one test case. 
<p>
<hr><h2>Member Typedef Documentation</h2>
<a class="anchor" name="696e7bf639f2a82053e8529eab26ab1e"></a><!-- doxytag: member="fructose::test_base::test_case" ref="696e7bf639f2a82053e8529eab26ab1e" args=")(const std::string &amp;)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;typename test_container&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">typedef void(test_container::* <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::<a class="el" href="classfructose_1_1test__base.html#696e7bf639f2a82053e8529eab26ab1e">test_case</a>)(const std::string &amp;)          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Type of test case functions<p>
Test cases are implemented as member functions of the test container class, which must be derived from this template (CRTP). These methods return void and accept one parameter: the name of the test case.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="30560442a7c4c8c495e2bd7cff352cdd"></a><!-- doxytag: member="fructose::test_base::add_test" ref="30560442a7c4c8c495e2bd7cff352cdd" args="(const std::string &amp;name, test_case the_test)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;typename test_container&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">void <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::add_test           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::string &amp;&nbsp;</td>
          <td class="mdname" nowrap> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap><a class="el" href="classfructose_1_1test__base.html#696e7bf639f2a82053e8529eab26ab1e">test_case</a>&nbsp;</td>
          <td class="mdname" nowrap> <em>the_test</em></td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Register a test case<p>
Register a member function implementing a test case against the name of the test case<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>- The name of the test case </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>the_test</em>&nbsp;</td><td>- The member function implementing the test case </td></tr>
  </table>
</dl>
    </td>
  </tr>
</table>
<a class="anchor" name="7b41fc2ae3f64bcc5139cb74830aeffa"></a><!-- doxytag: member="fructose::test_base::get_suite" ref="7b41fc2ae3f64bcc5139cb74830aeffa" args="(int argc, char *argv[])" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;typename test_container&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"><a class="el" href="classfructose_1_1test__root.html#bb7a988db4e5ea2c8a8d52173947ed23">test_root::suite</a> <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::get_suite           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>argv</em>[]</td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return a list of test names from the command line.<p>
This function returns a suite containing all the test cases named on the command line. If none are named, or if the keyword "all" is passed, all the configured test cases are included. The command line is parsed using the Open Source package TCLAP (Templatized C++ Command Line Parser).<p>
Note: This routine is provided for compatibility with older versions of fructose. New programs should use the function run(argc, argv).<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>argc</em>&nbsp;</td><td>- The argument count passed to main </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>argv</em>&nbsp;</td><td>- The argument vector passed to main</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The configured test suite </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="7f62476b5b76f573ad6eab2adcbab476"></a><!-- doxytag: member="fructose::test_base::run" ref="7f62476b5b76f573ad6eab2adcbab476" args="(const suite &amp;suite)" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;typename test_container&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::run           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="classfructose_1_1test__root.html#bb7a988db4e5ea2c8a8d52173947ed23">suite</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap> <em>suite</em>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Run tests configured in test suite<p>
This function runs the tests named in the test suite in the sequence by the suite. If the suite contains a name which is not registered, a warning message is issued.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>suite</em>&nbsp;</td><td>- The test suite</td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>- An integer suitable as main exit status: EXIT_SUCCESS if the the tests were successful, EXIT_FAILURE otherwise. </dd></dl>
    </td>
  </tr>
</table>
<a class="anchor" name="1e71f643ce9403eaef70befedc068daa"></a><!-- doxytag: member="fructose::test_base::run" ref="1e71f643ce9403eaef70befedc068daa" args="(int argc, char *argv[])" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;typename test_container&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::run           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="md" nowrap align="right"></td>
          <td class="md"></td>
          <td class="md" nowrap>char *&nbsp;</td>
          <td class="mdname" nowrap> <em>argv</em>[]</td>
        </tr>
        <tr>
          <td class="md"></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Run the test specified on the command line (runs all tests if none specified). Flags are set for various command line options such as the verbose flag and first assertion is fatal.     </td>
  </tr>
</table>
<a class="anchor" name="bd2e9bcf3098f22ce4ff6bb44218ddfd"></a><!-- doxytag: member="fructose::test_base::run" ref="bd2e9bcf3098f22ce4ff6bb44218ddfd" args="()" --><p>
<table class="mdTable" cellpadding="2" cellspacing="0">
  <tr>
    <td class="mdRow">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="mdPrefix" colspan="4">
template&lt;typename test_container&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top">int <a class="el" href="classfructose_1_1test__base.html">fructose::test_base</a>&lt; test_container &gt;::run           </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>          </td>
          <td class="md" valign="top">&nbsp;)&nbsp;</td>
          <td class="md" nowrap><code> [inline]</code></td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<table cellspacing="5" cellpadding="0" border="0">
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Run statically configured tests<p>
This function runs all the registered tests in the sequence in which they were registered.<p>
<dl compact><dt><b>Returns:</b></dt><dd>- An integer suitable as main exit status: EXIT_SUCCESS if the the tests were successful, EXIT_FAILURE otherwise. </dd></dl>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following file:<ul>
<li>include/fructose/<a class="el" href="test__base_8h-source.html">test_base.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Sun Jul 22 14:16:39 2007 for FRUCTOSE by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.6 </small></address>
</body>
</html>
